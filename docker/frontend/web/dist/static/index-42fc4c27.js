import{r as i,p as ue,Z as T,b as re,ai as s,aq as de,q as c,t as j,U as a,O as o,v as g,S as p,F as A,a8 as E,u,R as ce,M as v,D as pe,a9 as me,P as K,T as $}from"./vue-956193f0.js";import{x as _e,r as fe,y as ge,z as ve,A as be,E as k}from"./element-0afb0e99.js";import{g as he,k as ye,l as Ce,m as we}from"./index-8fe9da41.js";import{l as ke,g as M}from"./level-61112490.js";/* empty css                                                       */import{_ as Ve}from"./index-5b4830db.js";import"./vxe-78a23074.js";const b=i(""),F=i(!1);i();const ze=()=>{F.value=!0},xe={class:"app-container"},Se={class:"dialog-footer"},De={class:"toolbar-wrapper"},Ne={class:"table-wrapper"},Re={class:"demo-pagination-block"},B="60px",Ue=ue({__name:"index",setup(je){const V=i(!1),O=i(!1),h=i(),x=i(10),S=i(1),D=i(0),z=i(0),r={pageSize:20,pageNum:1},y=T({name:""}),m=()=>{V.value=!0,he(r).then(l=>{const{pageSize:e,pageNum:_,total:f,pages:R,list:U}=l.data;h.value=U,x.value=e,D.value=R,S.value=_,z.value=f}).catch(()=>{h.value=[]}).finally(()=>{V.value=!1})};m();const N=i(),W=l=>{N.value=l};function Z(){N.value==null&&k.warning("请选择删除项目");let l=[];for(const e of N.value)l.push(e.id);ye(l.join(",")).then(()=>{k.info("删除"+l.length+"个项目成功")}).catch(()=>{k.warning("删除"+l.length+"个项目失败")}).finally(()=>{m()})}const C=i(!1),n=T({name:"",tag:"",level:1});function G(){C.value=!1,Ce(n).catch(()=>{k.warning("添加项目失败")}).finally(()=>{m(),k.success("添加项目成功")})}function H(){C.value=!0}re([()=>r.pageNum,()=>r.pageSize],m,{immediate:!0});const J=l=>{r.pageSize=l,m()};function Q(l){let e=[];n.tag!=""&&(e=n.tag.split(",")),e=e.filter(_=>_!==l),n.tag=e.join(",")}function I(){let l;b.value&&(n.tag==""?l=[]:l=n.tag.split(","),l.push(b.value),n.tag=l.join(",")),F.value=!1,b.value=""}const X=l=>{r.pageNum=l,m()},Y=l=>{};function ee(l){if(l==null||l==""){m();return}we(l).then(e=>{h.value=[e.data],x.value=1,D.value=1,S.value=1,z.value=1}).catch(()=>{h.value=[],x.value=0,D.value=0,S.value=0,z.value=0})}const le=()=>{y.name=""};function ae(l,e){return l.id!=1}return(l,e)=>{const _=s("el-input"),f=s("el-form-item"),R=s("el-option"),U=s("el-select"),te=s("el-tag"),d=s("el-button"),q=s("el-form"),oe=s("el-dialog"),L=s("el-card"),ne=s("el-tooltip"),w=s("el-table-column"),se=s("el-table"),ie=s("el-pagination"),P=de("loading");return c(),j("div",xe,[a(oe,{modelValue:C.value,"onUpdate:modelValue":e[4]||(e[4]=t=>C.value=t),title:"添加项目"},{footer:o(()=>[g("span",Se,[a(d,{onClick:e[3]||(e[3]=t=>C.value=!1)},{default:o(()=>[p("取消")]),_:1}),a(d,{type:"primary",onClick:G},{default:o(()=>[p(" 确认 ")]),_:1})])]),default:o(()=>[a(q,{model:n},{default:o(()=>[a(f,{label:"项目名","label-width":B},{default:o(()=>[a(_,{modelValue:n.name,"onUpdate:modelValue":e[0]||(e[0]=t=>n.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(f,{label:"重要性","label-width":B},{default:o(()=>[a(U,{modelValue:n.level,"onUpdate:modelValue":e[1]||(e[1]=t=>n.level=t)},{default:o(()=>[(c(!0),j(A,null,E(u(ke),t=>(c(),v(R,{label:u(M)(t.value),value:t.value,key:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(f,{label:"标签","label-width":B},{default:o(()=>[n.tag?(c(!0),j(A,{key:0},E(n.tag.split(","),t=>(c(),v(te,{key:t,class:"mx-1",closable:"","disable-transitions":!1,onClose:Be=>Q(t)},{default:o(()=>[p($(t),1)]),_:2},1032,["onClose"]))),128)):ce("",!0),u(F)?(c(),v(_,{key:1,ref:"InputRef",modelValue:u(b),"onUpdate:modelValue":e[2]||(e[2]=t=>pe(b)?b.value=t:null),class:"ml-1 w-20",size:"small",onKeyup:me(I,["enter"]),onBlur:I},null,8,["modelValue","onKeyup"])):(c(),v(d,{key:2,class:"button-new-tag ml-1",size:"small",onClick:u(ze)},{default:o(()=>[p(" + 标签 ")]),_:1},8,["onClick"]))]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(L,{shadow:"never",class:"search-wrapper"},{default:o(()=>[a(q,{ref:"searchFormRef",inline:!0,model:y},{default:o(()=>[a(f,{prop:"username",label:"项目名"},{default:o(()=>[a(_,{modelValue:y.name,"onUpdate:modelValue":e[5]||(e[5]=t=>y.name=t),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),a(f,null,{default:o(()=>[a(d,{type:"primary",icon:u(_e),onClick:e[6]||(e[6]=t=>ee(y.name))},{default:o(()=>[p("查询")]),_:1},8,["icon"]),a(d,{icon:u(fe),onClick:le},{default:o(()=>[p("重置")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),_:1}),K((c(),v(L,null,{default:o(()=>[g("div",De,[g("div",null,[a(d,{type:"primary",icon:u(ge),onClick:H},{default:o(()=>[p("新增项目")]),_:1},8,["icon"]),a(d,{type:"danger",icon:u(ve),onClick:Z},{default:o(()=>[p("批量删除")]),_:1},8,["icon"])]),g("div",null,[a(ne,{content:"刷新当前页"},{default:o(()=>[a(d,{type:"primary",icon:u(be),circle:"",onClick:m},null,8,["icon"])]),_:1})])]),g("div",Ne,[K((c(),v(se,{ref:"multipleTableRef",data:h.value,border:"",style:{width:"100%"},onSelectionChange:W,onRowClick:Y},{default:o(()=>[a(w,{selectable:ae,type:"selection",width:"55"}),a(w,{label:"ID",prop:"id",width:60}),a(w,{prop:"name",label:"项目名",sortable:""}),a(w,{prop:"level",label:"重要性",align:"center",sortable:""},{default:o(t=>[g("span",null,$(u(M)(t.row.level)),1)]),_:1}),a(w,{label:"选项",prop:""},{default:o(t=>[a(d,{type:"info",round:"",size:"small"},{default:o(()=>[p("详情")]),_:1})]),_:1})]),_:1},8,["data"])),[[P,V.value]])]),g("div",Re,[a(ie,{"current-page":r.pageNum,"onUpdate:currentPage":e[7]||(e[7]=t=>r.pageNum=t),"page-size":r.pageSize,"onUpdate:pageSize":e[8]||(e[8]=t=>r.pageSize=t),"page-sizes":[10,20,50,100],small:!1,disabled:O.value,background:!0,layout:"total, sizes, prev, pager, next, jumper",total:z.value,onSizeChange:J,onCurrentChange:X},null,8,["current-page","page-size","disabled","total"])])]),_:1})),[[P,V.value]])])}}});const Ee=Ve(Ue,[["__scopeId","data-v-428fce05"]]);export{Ee as default};
